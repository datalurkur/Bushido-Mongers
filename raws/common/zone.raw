abstract zone {
    /* How deep in the world hierarchy the zone can be created. */
    class_many int depth_range;
    depth_range 0;

    /* Acceptable sub-zones */
    class_many optional sym child_zones;

    class_many optional sym keywords;
    class_many optional sym optional_keywords;

    /* Can spawn NPCs */
    class_many optional sym spawn_npcs;

    /* Can spawn items */
    class_many optional sym spawn_items;
    spawn_items rock chest;

    class sym sideness;
    sideness outside;

    class sym ground_name;
    ground_name ground;

    class bool zone_class;
    zone_class false;
}

post_process {
    static_types_of(:zone).each do |zone|
        spawn_types = info_for(zone)[:spawn_npcs]
        unless spawn_types.empty?
            # Get a list of non-abstract NPCs that spawn in this zone
            npc_types = instantiable_types_of(spawn_types).uniq
            set_info(zone, :spawn_npcs, npc_types)

            # Add this zone's data to the NPCs that spawn here
            npc_types.each do |npc_type|
                spawn_zones = info_for(npc_type, :spawns_in)
                spawn_zones << zone
                spawn_zones.uniq!
                set_info(npc_type, :spawns_in, spawn_zones)
            end
        end
    end
}
