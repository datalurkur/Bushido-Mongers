!!! 5
%head
    %title Bushido Mongers
    %link{:rel => "stylesheet", :href=>"/main.css", :type=>"text/css"}
%body{:onload => "init('default')"}
    %script{:type => "text/javascript", :src => "/index.js"}
    .wrapper
        .header
            %h1 Bushido Mongers
        .core
            .control
                %h3 Lobby Info
                %ul
                    %li
                        %a{:href => "javascript:void(0)", :onclick => "focusTab('default')"} General Info
                    %li
                        %a{:href => "javascript:void(0)", :onclick => "focusTab('map')"} Map
                    %li
                        %a{:href => "javascript:void(0)", :onclick => "focusTab('interactive_map')"} Interactive Map
                %h3 User List
                %ul
                    -lobby.user_list.each do |user|
                        %li
                            %a{:href => lobby.uri_for(user)}=user
            .content
                %div.tabs
                    %div.hiddentab#default
                        %table
                            %tr
                                %td Users
                                %td= lobby.user_list.size
                            %tr
                                %td State
                                %td= lobby.game_state
                    -if lobby.game_state == :playing || lobby.game_state == :ready
                        %div.hiddentab#map
                            %img{:src => lobby.map_uri}
                        %div.hiddentab#interactive_map
                            -#%img{:src => lobby.map_uri, :usemap => "img_map"}
                            -#%map{:name => "img_map"}
                                -#room_layout[:rooms].each do |room, info|
                                    -#%area{:shape => "rect", :coords => "#{info[:cell_coords].join(",")},#{([info[:cell_size]]*2).join(",")}", :href => "javascript:void(0)", :onclick => "alert('#{room.name}')", :alt => room.name}
                            %div{:style => "position:relative;"}
                                %img{:src => lobby.map_uri, :style => "position:relative;"}
                                -room_layout[:rooms].each do |room, info|
                                    %div{:style => "left:#{info[:cell_coords].x}px; top:#{info[:cell_coords].y}px; width:#{info[:cell_size]}px; height:#{info[:cell_size]}px; position:absolute; border:1px solid red;"}
                                        %a{:href => lobby.room_uri_for(room.name)}
                                            %span{:style => "width:100%;height:100%;position:absolute;left:0;top:0;"}
                    -lobby.user_list.each do |user|
                        %div.hiddentab{:id => user}="Info for #{user}"
        .footer
            %ul.navlist
                %li
                    %a{:href => "/"} Home
